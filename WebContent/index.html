<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>首页</title>
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/index.css">

</head>
<body>
    <header>
        <div class="top">
            <div class="top-content w980 clearfix">
                <a href="">帮助文档</a>
                <a href="">反馈意见</a>
                <a href="">忘记密码</a>
                 <div class='no-login'> 
                    <button class="reg">注册</button>
                    <button class="on">登陆</button>
                    <form action="">
                        <label for="username"><input type="text" placeholder="用户名"></label>
                        <label for="password"><input type="password" placeholder="密码"></label>
                    </form>
                 </div>
                 <dis class="login">
                    <!-- 加入登陆后的样式 后面改 -->
                    <img src="./images/center/photo.png" alt="">
                    <span>欢迎您，</span>
                    <span>用户名</span>
                    <span>[修改密码]</span>
                    <button>后台</button>
                    <button>退出</button>
                 </dis>
                
            </div>

            <div class="window">
                <div class="title">
                    <h4>新用户注册</h4>
                </div>
                <div class="text clearfix" >
                    <div class="label">
                        <label for="like">用户名：</label><br>
                        <label for="" class="type">密码：</label><br>
                        <label for="num">确认密码：</label><br>
                        <label for="dat">真实姓名：</label><br>
                        <label for="" class="ex ">所属单位：</label><br>
                        <label for="">身份证号：</label><br>
                        <label for="name">手机号码:</label><br>
                        <label for="add">短信验证码:</label><br>
                    </div>
                    <div class="form">
                        <input type="text"><i>6-20位数字、字母组成</i> <br>
                        <input type="text"><i>6-20位数字、字母组成</i><br>
                        <input type="text"><br>
                        <input type="text"><br>
                        <input type="text"><br>
                        <input type="text"><br>
                        <input type="text"><br>
                        <input type="text"> <button>获取短信验证码</button>
                    </div>

                </div>
            </div>
        </div>
        <div class="logo clearfix  ">
            <div class="wrap w980">
                <!-- <a href="">
                    <img src="./images/logo.png" alt="logo">
                </a> -->
                <div class="search clearfix">
                    <p>关键字</p>
                    <p>课程</p>
                    <p>专题</p>
                    <p>资料</p>
                    <form action="">
                        <label for="">
                            <input type="text" placeholder="搜索课程、专题或资料">
                            <button>
                                <i>字体图标</i>
                            </button>
                        </label>
                    </form>
                </div>
            </div>
            
        </div>
    </header>
    <div class="naver">
        <nav class="w980">
            <ul class="clearfix">
                <li><a href="" class="now">首页</a></li>
                <li><a href="#">个人中心</a></li>
                <li><a href="#">课程列表</a></li>
                <li><a href="">教务公告</a></li>
                <li><a href="">学院信息</a></li>
                <li><a href="">校内通知</a></li>
            </ul>
        </nav>
    </div>


    <div class="main w980 clearfix">
        <div class="courel-wrap">
            <ul class="img-ct">
                <li><img src="./images/index/silder01.png" alt=""></li>
                <li><img src="./images/index/silder02.jpg" alt=""></li>
                <li><img src="./images/index/silder03.jpg" alt=""></li>
            </ul>
            <span class="btn btn-fl"><</span>
            <span class="btn btn-fr">></span>
            <dl class="dot">
                <i class="selected">1</i>
                <i>2</i>
                <i>3</i>
            </dl>
        </div>

        <div class="notify">
            <div class="top-list clearfix">
                <p class="show">通知公告</p>
                <span>更多+</span>
            </div>
            <div class="list ">
                <ul>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人民政府关于林巍等同志任职长春市人民政府关于林巍等同志任职</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                    <li><a href="http://" target="_blank" rel="noopener noreferrer">长春市人大常委会任免职名单</a></li>
                </ul>
            </div>
        </div>
        <div class="newClass">
            <div class="title">
                <p>最新课程</p>
                <span>更多+</span>
            </div>
            <ul class="clearfix">
                <li>
                    <img src="./images/index/lesson.jpg" alt="">
                        <p>B级课程</p>
                        <p>主讲人： 具体姓名</p>
                </li>
                <li>
                    <img src="./images/index/lesson.jpg" alt="">
                        <p>B级课程</p>
                        <p>主讲人： 具体姓名</p>
                </li>
                <li>
                    <img src="./images/index/lesson.jpg" alt="">
                        <p>B级课程</p>
                        <p>主讲人： 具体姓名</p>
                </li>
                <li>
                    <img src="./images/index/lesson.jpg" alt="">
                        <p>B级课程</p>
                        <p>主讲人： 具体姓名</p>
                </li>
                <li>
                    <img src="./images/index/lesson.jpg" alt="">
                        <p>B级课程</p>
                        <p>主讲人： 具体姓名</p>
                </li>
                <li>
                    <img src="./images/index/lesson.jpg" alt="">
                        <p>B级课程</p>
                        <p>主讲人： 具体姓名</p>
                </li>
            </ul>
        </div>
        
        <div class="discuss">
            <div class="title">
                <p>学生讨论</p>
                <span>更多+</span>
            </div>
        </div>
        <div class="linked">
            <div class="title">
                <p>友情链接</p>
                <!-- <p>省内网站</p> -->
                <!-- <p>省外网站</p> -->
            </div>
            <ul class="clearfix">
                <li class="select"><a href="http://umis.jlu.edu.cn">吉林大学本科教务管理系统</a> <span>|</span></li>
                <li><a href="http://oa.jlu.edu.cn">吉林大学健康状况申报</a> <span>|</span></li>
                <li><a href="#">......</a> <span>|</span></li>
 
            </ul>
        </div>
    </div>
    
    <footer>
        <div class="foot w980">
            <p>
                后续补充后续补充后续补充后续补充后续补充
            </p>
            <p>后续补充
            </p>
        </div>
    </footer>

    <script src="./jq/jquery-1.10.2.min.js"></script>
    <script src="./js/store.min.js"></script>
    <script>
        var firtsIn=function(){
            if(store.get("user")!=undefined){
                $(".login").css("display","block")
                $(".no-login").css("display","none")
                $(".login").children("span").eq(1).text(store.get("user").username)
        }
        }()


        //获取用户输入信息 并发送至服务端口
        $("header .top .on").on("click",function(){
            console.log("按下登陆按钮")
            var user=$("header .top input").eq(0).val(),
                pwd=$("header .top input").eq(1).val();
            var data={};
            if(pwd.length==0 ||user.length==0){
                alert("请输入用户名和密码")
            }
            else{
                data["usercode"]=user;
                data["userpwd"]=pwd;
                //以下代码应放入success中 当成功获取到用户名信息后存入data 并改变top样式
                store.set("user",data);
                $.ajax({
                    type: 'post',
                    url: 'http://localhost:8080/SoftwareEngineer/login',//url的参数自行修改
                   // contentType:'application/x-www-form-urlencoded',
                    data:{
                        usercode:user,
                        userpwd:pwd
                    },
                    dataType:"json",
                    success: function (data) {
                    	//$.parseJSON(data);
                        console.log(typeof(data));
                        if(data["isTrue"]==1){
                            console.log('登陆成功')
                            //将对no-login和login的显示处理
                            store.set("user",data);
                            if(store.get("user")!=undefined){
                                $(".login").css("display","block")
                                $(".no-login").css("display","none")
                                $(".login").children("span").eq(1).text(store.get("user").username)
                            }
                        }
                        else{
                            console.log('登陆失败')
                        }
                    },
                    error: function (data) {
                        console.log("error");
                    }
                })

            }
            
        })
        //Login 后退出效果
        $("header .top .login button:last").on("click",function(){
            
            $(".login").css("display","none")
            $(".no-login").css("display","block")
            $(".no-login input").eq(0).val("")
            $(".no-login input").eq(1).val("")
            store.remove('user')
        })
        
        //根据用户属性不同跳转不同的个人页面
        $(".naver ul li:nth-child(2) a").on("click",function(){
            //user 0-xx是管理员 1-是教授  2-学生
            if(store.get("user")==undefined){
                alert("请先登陆")
            }
            else{
                var userType=0||store.get("user").username.split("-")[0]
                if(userType==0){
                    window.location.assign("center-admin.html?")
                }
                else if(userType==1){
                    window.location.assign("center-professor.html?")
                }
                else if(userType==2){
                    window.location.assign("center-student.html")
                }
            }
        })
        $(".naver ul li:nth-child(3) a").on("click",function(){
            //user 0-xx是管理员 1-是教授  2-学生
            if(store.get("user")==undefined){
                alert("请先登陆")
            }
            else{
                var userType=0||store.get("user").username.split("-")[0]
                if(userType==0){
                    window.location.assign("market-admin.html")
                }
                else if(userType==1){
                    window.location.assign("market-professor.html")
                }
                else if(userType==2){
                    window.location.assign("market-student.html")
                }
            }
            

        })
        //轮播特效
        function Carousel($ct){
                this.$ct=$ct;
                this.init();
                this.bind();
                this.move();
            }
            Carousel.prototype.init=function(){
                    // 获取变量
                    var $imgCt=this.$imgCt=this.$ct.find('.img-ct');
                    var $buttles=this.$buttles=this.$ct.find('.dot i');
                    var $preBtn=this.$preBtn=this.$ct.find('.btn-fl');
                    var $nextBtn=this.$nextBtn=this.$ct.find('.btn-fr');


                    // 获取第一张图片
                    var $firstImg=$imgCt.children().first(),
                        $lastImg=$imgCt.children().last();
                    // 当前图片的索引
                    this.pageIndex=0;
                    // 获取几张图片
                    this.$imgLength=$imgCt.children().length;
                    console.log(this.$imgLength)//4
                    // 获取图片的宽度
                    this.$imgWidth=$firstImg.width();
                    console.log(this.$imgWidth)//680
                    // 动画上锁
                    this.isAnimate=false;
                    // 克隆图片.clone()
                    $imgCt.append($firstImg.clone());
                    $imgCt.prepend($lastImg.clone());
                    $imgCt.width((this.$imgLength+2)*this.$imgWidth);
                    $imgCt.css({left:-this.$imgWidth});
            }
            Carousel.prototype.bind=function(){
                    var _this=this;
                    this.$nextBtn.click(function(){
                        _this.playNext(1);
                    })
                    this.$preBtn.click(function(){
                        _this.playPre(1);
                    })
                    this.$buttles.click(function(){
                        // 获取信号量索引
                        var index=$(this).index();
                        console.log(index)
                        if(index> _this.pageIndex){
                            _this.playNext(index- _this.pageIndex);
                        }else if(index< _this.pageIndex){
                            _this.playPre( _this.pageIndex-index)
                        }
                    })
            }
            Carousel.prototype.playNext=function(len){
                var _this=this;
                if(this.isAnimate) return;
                this.isAnimate=true;
                this.$imgCt.animate({left:'-='+len*this.$imgWidth+'px'},function(){
                    _this.pageIndex+=len;
                    if( _this.pageIndex=== _this.$imgLength){
                        _this.pageIndex=0;
                        _this.$imgCt.css({left:- _this.$imgWidth})
                    }
                    _this.setButtles()
                    _this.isAnimate=false;
                })
            }
            Carousel.prototype.playPre=function(len){
                var _this=this;
                if(this.isAnimate) return;
                this.isAnimate=true;
                this.$imgCt.animate({left:'+='+len*this.$imgWidth},function(){
                    _this.pageIndex-=len;
                    if( _this.pageIndex<0){
                        _this.pageIndex= _this.$imgLength-1;
                        _this.$imgCt.css({left:- _this.$imgWidth* _this.$imgLength})
                    }
                    _this.setButtles();
                    _this.isAnimate=false;
                })
            }
            Carousel.prototype.setButtles=function(){
                this.$buttles.removeClass('selected')
                        .eq(this.pageIndex)
                        .addClass('selected');
            }
            Carousel.prototype.move=function(){
                var _this=this;
                setInterval(function(){
                 _this.playNext(1);
            },2000)
        }
        new Carousel($('.courel-wrap'));
    </script>
</body>


</html>